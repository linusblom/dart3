<app-box header="Settings">
  <app-box-group header="Account">
    <ng-container *ngIf="coreAccountWrite$ | async; else noPermission">
      <div class="account">
        <mat-form-field>
          <input
            matInput
            placeholder="Name"
            [formControl]="displayName"
            (change)="onChangeDisplayName()"
          />
        </mat-form-field>
        <mat-form-field class="currency">
          <input
            matInput
            placeholder="Currency"
            [formControl]="currency"
            (change)="onChangeCurrency()"
          />
        </mat-form-field>
      </div>
    </ng-container>
  </app-box-group>

  <app-box-group header="Password">
    <ng-container *ngIf="coreAccountWrite$ | async; else noPermission">
      <div class="password-form" [formGroup]="passwordForm">
        <mat-form-field>
          <input
            matInput
            type="password"
            formControlName="password"
            placeholder="Current password"
          />
        </mat-form-field>
        <div class="new-password">
          <mat-form-field>
            <input matInput type="password" formControlName="newPassword" placeholder="Password" />
          </mat-form-field>
          <mat-form-field>
            <input
              matInput
              type="password"
              formControlName="confirmPassword"
              placeholder="Confirm password"
            />
          </mat-form-field>
        </div>
      </div>
    </ng-container>
  </app-box-group>
  <app-box-buttons
    rightText="Change"
    [rightLoading]="loading$ | async"
    [rightDisabled]="passwordForm.invalid"
    (rightClick)="onChangePassword()"
  ></app-box-buttons>
</app-box>

<ng-template #noPermission>
  <div class="no-permission">
    <fa-icon [icon]="noPermissionIcon" size="2x"></fa-icon>
    <span>You don't have permission(s) to perform this operation.</span>
  </div>
</ng-template>
