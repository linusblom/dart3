<app-box header="Game results" width="100%">
  <app-box-group header="Game">
    <div class="info">
      <div class="info-item">
        <div class="description">type</div>
        <div class="value">{{ getGameNiceName(game.type) }}</div>
      </div>

      <div class="info-item">
        <div class="description">players</div>
        <div class="value">{{ game.playerIds.length }}</div>
      </div>

      <div class="info-item">
        <div class="description">bet</div>
        <div class="value">{{ game.bet | number: '1.2-2' | currency }}</div>
      </div>

      <div class="info-item">
        <div class="description">prizepool</div>
        <div class="value">{{ game.prizePool | number: '1.2-2' | currency }}</div>
      </div>

      <div class="info-item">
        <div class="description">duration</div>
        <div class="value">{{ millisToMinutesAndSeconds(game.ended - game.started) }}</div>
      </div>
    </div>
  </app-box-group>

  <app-box-group header="Results" [styled]="false">
    <div class="wrapper">
      <div class="row header">
        <div class="field small">
          Rank
        </div>
        <div class="field small"></div>
        <div class="field">
          Name
        </div>
        <div class="field">
          XP
        </div>
        <div class="field small">
          Win
        </div>
      </div>
      <div *ngFor="let player of sortedGamePlayers" class="row">
        <div class="field rank small">
          <app-emoji
            *ngIf="player.position < 4; else position"
            [hex]="medalEmojiHex[player.position - 1]"
            size="40"
          ></app-emoji>
          <ng-template #position>{{ player.position }}.</ng-template>
        </div>
        <div class="field small">
          <app-avatar
            [avatarUrl]="player.base.avatarUrl"
            [color]="player.base.color"
            [name]="player.base.name"
            size="40"
          ></app-avatar>
        </div>
        <div class="field">
          <div>{{ player.base.name }}</div>
          <app-level [xp]="player.base.xp"></app-level>
        </div>
        <div class="field">
          <div>{{ player.xp }}</div>
          <app-level-progress [xp]="player.base.xp"></app-level-progress>
        </div>
        <div class="field small">
          {{ player.win > 0 ? (player.win | number: '1.2-2' | currency) : '-' }}
        </div>
      </div>
    </div>
  </app-box-group>

  <app-score-board
    [type]="game.type"
    [players]="game.players"
    [currentRound]="game.currentRound"
    [disableAnimation]="true"
    [disablePosition]="true"
    [fullWidth]="true"
  ></app-score-board>

  <app-box-group header="Statistics" [styled]="false">
    <app-box-tabs
      head
      [tabs]="tabs"
      [activeTab]="activeTab"
      (activeTabChange)="changeTab($event)"
    ></app-box-tabs>
    <div class="chart-wrapper">
      <div class="chart">
        <canvas #barChartRef>{{ barChart }}</canvas>
      </div>
      <div class="chart">
        <canvas #pieChartRef>{{ pieChart }}</canvas>
      </div>
    </div>
  </app-box-group>
</app-box>
